<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <title>Form Absen Otomatis</title>
  <style>
    :root {
      --primary-color: #2E7D32;
      --secondary-color: #1B5E20;
      --danger-color: #C62828;
      --gray-color: #757575;
      --light-gray: #f4f7fa;
      --border-radius: 10px;
      --font-large: 1.2rem;
      --font-xlarge: 1.5rem;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Arial', sans-serif;
      background: #f4f7fa;
      min-height: 100vh;
      padding: 20px;
      font-size: 18px;
      line-height: 1.6;
    }

    .form-container {
      background: white;
      padding: 25px;
      border-radius: var(--border-radius);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 1000px;
      margin: 0 auto;
    }

    h2 {
      text-align: center;
      margin-bottom: 25px;
      font-size: var(--font-xlarge);
      color: #333;
    }

    input[type="date"], 
    select, 
    button {
      padding: 15px;
      margin: 12px 0;
      width: 100%;
      box-sizing: border-box;
      border-radius: var(--border-radius);
      border: 2px solid #ddd;
      font-size: var(--font-large);
    }

    input[type="date"]:focus,
    select:focus {
      border-color: var(--primary-color);
      outline: none;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 25px 0;
      font-size: var(--font-large);
    }

    th, td {
      padding: 15px 10px;
      text-align: center;
      border: 1px solid #ddd;
    }

    th {
      background-color: #f2f2f2;
      font-weight: bold;
    }

    button {
      background-color: var(--primary-color);
      color: white;
      border: none;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s;
      font-size: var(--font-large);
    }

    button:hover {
      background-color: var(--secondary-color);
    }

    .btn-group {
      display: flex;
      gap: 15px;
      margin: 20px 0;
      flex-wrap: wrap;
    }

    .btn-group button {
      flex: 1;
      min-width: 150px;
    }

    .btn-danger {
      background-color: var(--danger-color);
    }

    .btn-danger:hover {
      background-color: #B71C1C;
    }

    .btn-secondary {
      background-color: var(--gray-color);
    }

    .btn-secondary:hover {
      background-color: #616161;
    }

    input[type="radio"] {
      transform: scale(1.8);
      margin: 0 10px;
      accent-color: var(--primary-color);
    }

    /* Responsive Styles */
    @media (max-width: 768px) {
      body {
        padding: 10px;
        font-size: 16px;
      }

      .form-container {
        padding: 15px;
      }

      h2 {
        font-size: var(--font-large);
        margin-bottom: 15px;
      }

      table {
        font-size: 16px;
      }

      th, td {
        padding: 12px 5px;
      }

      input[type="radio"] {
        transform: scale(1.5);
        margin: 0 5px;
      }

      .btn-group {
        flex-direction: column;
        gap: 10px;
      }

      .btn-group button {
        width: 100%;
      }
    }

    @media (max-width: 480px) {
      table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
      }

      input[type="date"],
      select,
      button {
        padding: 12px;
        font-size: 16px;
      }
    }
  </style>
</head>
<body>

  <div class="form-container">
    <h2>Form Absen Siswa</h2>
    <form id="absenForm">
      <input type="date" id="tanggal" required>
      <select id="pelajaran" required>
        <option value="">Pilih Mata Pelajaran</option>
      </select>

      <div class="btn-group">
        <button type="button" onclick="hadirSemua()">Hadir Semua</button>
        <button type="button" onclick="tidakHadirSemua()">Tidak Hadir Semua</button>
        <button type="button" class="btn-secondary" onclick="resetSemua()">Reset Semua</button>
      </div>

      <table id="siswaTable">
        <thead>
          <tr>
            <th>No</th>
            <th>Nama Siswa</th>
            <th>NIS</th>
            <th>Hadir</th>
            <th>Tidak Hadir</th>
          </tr>
        </thead>
        <tbody>
          <!-- Data siswa nanti disini -->
        </tbody>
      </table>

      <div class="btn-group">
        <button type="button" onclick="simpanAbsensi()">Simpan Absensi</button>
        <button type="button" class="btn-secondary" onclick="window.location.href='dashboard.html'">Kembali ke Dashboard</button>
      </div>
    </form>
  </div>

  <script>
    // Data pelajaran
    const pelajaranList = [
      "Matematika",
      "Fisika",
      "Kimia",
      "Bahasa Indonesia",
      "Sejarah",
      "Biologi",
      "Geografi",
      "Sosiologi",
      "Ekonomi",
      "Bahasa Inggris"
    ];

    // Data siswa (40 orang)
    const siswaData = [
      { nama: "Ali", nis: "12345601" },
      { nama: "Budi", nis: "12345602" },
      { nama: "Cici", nis: "12345603" },
      { nama: "Dewi", nis: "12345604" },
      { nama: "Eka", nis: "12345605" },
      { nama: "Farah", nis: "12345606" },
      { nama: "Gilang", nis: "12345607" },
      { nama: "Hana", nis: "12345608" },
      { nama: "Irfan", nis: "12345609" },
      { nama: "Joko", nis: "12345610" },
      { nama: "Kiki", nis: "12345611" },
      { nama: "Lina", nis: "12345612" },
      { nama: "Maya", nis: "12345613" },
      { nama: "Nina", nis: "12345614" },
      { nama: "Oki", nis: "12345615" },
      { nama: "Putri", nis: "12345616" },
      { nama: "Qori", nis: "12345617" },
      { nama: "Rian", nis: "12345618" },
      { nama: "Siska", nis: "12345619" },
      { nama: "Tina", nis: "12345620" },
      { nama: "Udin", nis: "12345621" },
      { nama: "Vina", nis: "12345622" },
      { nama: "Wawan", nis: "12345623" },
      { nama: "Xena", nis: "12345624" },
      { nama: "Yoga", nis: "12345625" },
      { nama: "Zara", nis: "12345626" },
      { nama: "Abdi", nis: "12345627" },
      { nama: "Bela", nis: "12345628" },
      { nama: "Candra", nis: "12345629" },
      { nama: "Dina", nis: "12345630" },
      { nama: "Edo", nis: "12345631" },
      { nama: "Fani", nis: "12345632" },
      { nama: "Gita", nis: "12345633" },
      { nama: "Hari", nis: "12345634" },
      { nama: "Intan", nis: "12345635" },
      { nama: "Jihan", nis: "12345636" },
      { nama: "Kevin", nis: "12345637" },
      { nama: "Luthfi", nis: "12345638" },
      { nama: "Mega", nis: "12345639" },
      { nama: "Naufal", nis: "12345640" }
    ];

    // Isi pilihan pelajaran
    const pelajaranSelect = document.getElementById('pelajaran');
    pelajaranList.forEach(pelajaran => {
      const option = document.createElement('option');
      option.value = pelajaran;
      option.textContent = pelajaran;
      pelajaranSelect.appendChild(option);
    });

    // Tampilkan siswa ke tabel
    const siswaTableBody = document.querySelector('#siswaTable tbody');
    siswaData.forEach((siswa, index) => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${index + 1}</td>
        <td>${siswa.nama}</td>
        <td>${siswa.nis}</td>
        <td><input type="radio" name="absen-${index}" value="Hadir" /></td>
        <td><input type="radio" name="absen-${index}" value="Tidak Hadir" /></td>
      `;
      siswaTableBody.appendChild(row);
    });

    // Fungsi Hadir Semua
    function hadirSemua() {
      siswaData.forEach((_, index) => {
        document.querySelector(`input[name="absen-${index}"][value="Hadir"]`).checked = true;
      });
      alert("Semua siswa diatur sebagai Hadir");
    }

    // Fungsi Tidak Hadir Semua
    function tidakHadirSemua() {
      siswaData.forEach((_, index) => {
        document.querySelector(`input[name="absen-${index}"][value="Tidak Hadir"]`).checked = true;
      });
      alert("Semua siswa diatur sebagai Tidak Hadir");
    }

    // Fungsi Reset Semua
    function resetSemua() {
      siswaData.forEach((_, index) => {
        document.querySelectorAll(`input[name="absen-${index}"]`).forEach(input => input.checked = false);
      });
      alert("Status absensi direset");
    }

    // Simpan Absensi
    function simpanAbsensi() {
      const tanggal = document.getElementById('tanggal').value;
      const pelajaran = document.getElementById('pelajaran').value;
      
      if (!tanggal || !pelajaran) {
        alert("Tanggal dan pelajaran wajib diisi!");
        return;
      }

      // Validasi apakah semua siswa sudah diisi absensinya
      let semuaTerisi = true;
      const absensi = siswaData.map((siswa, index) => {
        const status = document.querySelector(`input[name="absen-${index}"]:checked`);
        if (!status) {
          semuaTerisi = false;
        }
        return {
          nama: siswa.nama,
          nis: siswa.nis,
          status: status ? status.value : "Belum Diisi"
        };
      });

      if (!semuaTerisi) {
        const konfirmasi = confirm("Masih ada siswa yang belum diisi absensinya. Yakin ingin melanjutkan?");
        if (!konfirmasi) {
          return;
        }
      }

      const dataAbsen = {
        tanggal,
        pelajaran,
        absensi
      };

      // Simpan ke localStorage
      let absensiList = JSON.parse(localStorage.getItem('absensi')) || [];
      absensiList.push(dataAbsen);
      localStorage.setItem('absensi', JSON.stringify(absensiList));
      
      alert('Absensi berhasil disimpan!');
      document.getElementById('absenForm').reset();
      resetSemua();
    }

    // Set tanggal default ke hari ini
    window.onload = function() {
      const today = new Date().toISOString().split('T')[0];
      document.getElementById('tanggal').value = today;
    };
  </script>

</body>
</html>